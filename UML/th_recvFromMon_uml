@startuml
scale 1920*1080
skinparam monochrome true
start
:serverOk?;
while ()
    :msgRcv = monitor.Read();
    if (msgRcv.CompareID(MESSAGE_MONITOR_LOST) then (true)
        stop
    else (false)
        if (msgRcv.CompareID(MESSAGE_ROBOT_COM_OPEN)) then (true)
            :openComRobot!;
        else (false)
            if (msgRcv.compareID(MESSAGE_ROBOT_START_WITHOUT_WD 
                || MESSAGE_ROBOT_START_WITH_WD)) then (true)
                if (msgRcv.CompareID(MESSAGE_ROBOT_START_WITHOUT_WD)) then (true)
                    :start_without_wd = true;
                else (false)
                    :start_without_wd = false; 
                endif
                :startRobot!;
                
            else (false)
                if (msgRcv.CompareID(MESSAGE_ROBOT_GO_FORWARD 
                    || msgRcv.CompareID(MESSAGE_ROBOT_GO_BACKWARD
                    || msgRcv.CompareID(MESSAGE_ROBOT_GO_LEFT
                    || msgRcv.CompareID(MESSAGE_ROBOT_GO_RIGHT
                    || msgRcv.CompareID(MESSAGE_ROBOT_STOP)) then (true)
                    :move = msg.GetId();
                else (false)
                    if (msgRcv.CompareID(MESSAGE_CAM_OPEN)) then (true)
                        :openCamera!;
                    else (false)
                        if(msgRcv.CompareID(MESSAGE_CAM_CLOSE) then (true)
                            :closeCamera!;
                        else (false)
                            if(msgRcv.CompareID(MESSAGE_CAM_POSITION_COMPUTE_START) then (true)
                                :startGetRobotPosition!;
                            else (false)
                                if (if(msgRcv.CompareID(MESSAGE_CAM_POSITION_COMPUTE_STOP) then (true))
                                    :stopGetRobotPosition!;
                                else (false)
                                    :getArena!;
                                endif
                            endif
                        endif
                        
                    endif
                endif
            endif
        endif
    endif
endwhile
stop
@enduml
